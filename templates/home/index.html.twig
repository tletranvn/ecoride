{% extends 'base.html.twig' %}

{% block title %}Accueil - EcoRide{% endblock %}

{% block body %}
<div class="d-flex flex-column min-vh-100">
    <main class="container flex-grow-1 mt-5">

        <!-- ‚úÖ Bandeau principal -->
        <div class="text-center mb-5">
            <h1 class="display-4">Bienvenue sur <strong>EcoRide</strong> üöóüå±</h1>
            <p class="lead">Partagez vos trajets, r√©duisez vos √©missions de CO‚ÇÇ, et roulez vers un avenir plus vert.</p>
        </div>

        <!-- ‚úÖ Zone dynamique si connect√© -->
        <div id="connected-home" class="alert alert-success d-none text-center">
            Bonjour <span id="home-pseudo"></span> üëã<br>
            <a href="/mes-trajets" class="btn btn-outline-success mt-3">Voir mes trajets</a>
        </div>

        <!-- ‚úÖ Pr√©sentation EcoRide -->
        <section class="mb-5">
            <!-- ‚úÖ Pr√©sentation de l'entreprise -->
            <div class="text-center mb-5">
                <p class="fs-5">
                    <strong>EcoRide</strong> est une plateforme de covoiturage √©co-responsable fond√©e en 2025, 
                    avec pour mission de rendre les d√©placements plus durables et accessibles √† tous. 
                    Nous croyons en une mobilit√© respectueuse de l‚Äôenvironnement, humaine et √©quitable. 
                    Chaque trajet partag√© est un pas de plus vers une plan√®te plus verte et une soci√©t√© plus solidaire.
                </p>
            </div>
            <h2 class="text-center mb-4">Pourquoi choisir EcoRide ?</h2>
            <div class="row text-center">
                <div class="col-md-4 mb-4">
                    <h4>üåç √âcologique</h4>
                    <p>En partageant vos trajets, vous r√©duisez les √©missions de gaz √† effet de serre et contribuez √† un environnement plus sain.</p>
                </div>
                <div class="col-md-4 mb-4">
                    <h4>üí∂ √âconomique</h4>
                    <p>Gr√¢ce √† un syst√®me de cr√©dits, rouler devient plus √©quitable et avantageux pour tous les membres.</p>
                </div>
                <div class="col-md-4 mb-4">
                    <h4>ü§ù Communautaire</h4>
                    <p>Rejoignez une communaut√© engag√©e, solidaire, et partagez vos trajets dans une ambiance conviviale et respectueuse.</p>
                </div>
            </div>
            <!-- ‚úÖ Formulaire de recherche d'itin√©raire -->
            <section class="mb-5">
                <h2 class="text-center mb-4">Rechercher un itin√©raire</h2>
                <form action="/rechercher-trajet" method="GET" class="row g-3 justify-content-center">
                    <div class="col-md-4">
                        <input type="text" name="ville_depart" class="form-control" placeholder="Ville de d√©part" required>
                    </div>
                    <div class="col-md-4">
                        <input type="text" name="ville_arrivee" class="form-control" placeholder="Ville d‚Äôarriv√©e" required>
                    </div>
                    <div class="col-md-2">
                        <button type="submit" class="btn btn-success w-100">Rechercher</button>
                    </div>
                </form>
            </section>         
        </section>

        <!-- ‚úÖ Section images -->
        <section class="mb-5">
            <h2 class="text-center mb-4">Notre vision en images</h2>
            <div class="row text-center">
                <div class="col-md-4 mb-4">
                    <img src="/images/ecoride1.jpg" alt="Trajet partag√© en nature" class="img-fluid rounded shadow-sm">
                    <p class="mt-2">Des trajets respectueux de la nature</p>
                </div>
                <div class="col-md-4 mb-4">
                    <img src="/images/ecoride2.jpg" alt="Conducteur heureux" class="img-fluid rounded shadow-sm">
                    <p class="mt-2">Des rencontres humaines</p>
                </div>
                <div class="col-md-4 mb-4">
                    <img src="/images/ecoride3.jpg" alt="Carte et √©conomie de CO2" class="img-fluid rounded shadow-sm">
                    <p class="mt-2">Une action concr√®te pour la plan√®te</p>
                </div>
            </div>
            <!-- ‚úÖ Zone pour visiteurs non connect√©s -->
            <div id="guest-home" class="text-center mb-4">
                <p class="fs-5">Rejoignez-nous d√®s maintenant pour covoiturer autrement !</p>
                <a href="/login" class="btn btn-primary me-2">Connexion</a>
                <a href="/register" class="btn btn-outline-primary">Inscription</a>
            </div>
        </section>

    </main>


</div>

<!-- ‚úÖ Script dynamique d‚Äôaccueil -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const token = localStorage.getItem('apiToken');
        const pseudo = localStorage.getItem('pseudo');

        const connectedBlock = document.getElementById('connected-home');
        const guestBlock = document.getElementById('guest-home');
        const pseudoSpan = document.getElementById('home-pseudo');

        if (token && pseudo) {
            connectedBlock?.classList.remove('d-none');
            guestBlock?.classList.add('d-none');
            if (pseudoSpan) pseudoSpan.textContent = pseudo;
        } else {
            guestBlock?.classList.remove('d-none');
            connectedBlock?.classList.add('d-none');
        }
    });
</script>
{% endblock %}
